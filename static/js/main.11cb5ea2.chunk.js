(this.webpackJsonpleto=this.webpackJsonpleto||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(12),r=n.n(i),s=(n(18),n(19),n(3)),l=n(4),o=n(5),u=n.n(o),d=n(7),f=function(e,t){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(n.current){var e=setTimeout((function(){t()}),500);return function(){clearTimeout(e)}}n.current=!0}),[t,e])},j=n(13),b=/\s\s+/g,v={id:null,value:null,label:"",done:!1,flag:""},O={date:null,id:null,tasks:Object(j.a)(new Array(1).keys()).map((function(e){return Object(s.a)(Object(s.a)({},v),{},{id:e})})),timeStatus:null,additionalInfo:{label:""}},h=(n(21),n(22),n(1)),m=function(e){var t=e.data,n=e.onFieldChange,c=e.listCounter,i=e.handleKeyNavigation,r=e.blankId,s=Object(a.useState)(t.label),o=Object(l.a)(s,2),u=o[0],d=o[1],f=Object(a.useState)(t.done),j=Object(l.a)(f,2),v=j[0],O=j[1];return Object(h.jsxs)("div",{className:"input-field ".concat(v?"done":""),children:[Object(h.jsxs)("span",{className:"list-counter",children:[c+1,"."]}),Object(h.jsx)("input",{className:"text",name:"taskField",value:u,onChange:function(e){var t=e.target.value.replace(b," ");t?n({name:"label",value:t}):(O(!1),n({name:"done",value:!1}),n({name:"label",value:""})),i(e,t),d(t)},onKeyDown:i,title:u}),Object(h.jsxs)("div",{className:"custom-checkbox",children:[Object(h.jsx)("input",{id:"checkboxId".concat(r).concat(t.id),type:"checkbox",onChange:function(){u&&(O(!v),n({name:"done",value:!v}))},checked:v}),Object(h.jsx)("label",{htmlFor:"checkboxId".concat(r).concat(t.id),children:Object(h.jsx)("span",{})})]})]})},x=function(e){var t=e.onFieldChange,n=e.data,a=e.handleKeyNavigation,c=e.listCounter,i=e.blankId;return Object(h.jsx)("div",{className:"task-field",children:Object(h.jsx)(m,{data:n,onFieldChange:function(e){var a=Object(s.a)(Object(s.a)({},n),{},Object(d.a)({},e.name,e.value));t({name:"tasks",value:a})},handleKeyNavigation:a,listCounter:c,blankId:i},n.id)})},p=(n(24),function(e){var t=e.data,n=e.onFieldChange,c=Object(a.useState)(t.additionalInfo.label),i=Object(l.a)(c,2),r=i[0],s=i[1],o=Object(a.useState)(!1),u=Object(l.a)(o,2),d=u[0],f=u[1],j=Object(a.useRef)(null),v=function(){f(!d)};return Object(a.useEffect)((function(){var e=j.current;e&&d&&(e.focus(),e.selectionStart=e.value.length)}),[j,d]),Object(h.jsxs)("div",{className:"additional ".concat(d?"active":""),children:[Object(h.jsx)("span",{className:"additional-btn ".concat(r.length>3?"active ":""),onClick:v,children:"..."}),Object(h.jsxs)("div",{className:"additional-info",onMouseLeave:v,children:[Object(h.jsx)("h2",{children:"Additional Info"}),Object(h.jsx)("div",{className:"content",children:Object(h.jsx)("textarea",{name:"additionalInfo",id:"textarea-blank".concat(t.id),value:r,onChange:function(e){var t=e.target.value.replace(b," ");s(t),n({name:e.target.name,value:{label:t}})},placeholder:"Reminder...",ref:j})})]})]})}),g=(n(25),function(e){var t=e.data,n=e.onSave,c=Object(a.useState)({tasks:t.tasks,id:t.id,date:t.date,timeStatus:t.timeStatus,additionalInfo:t.additionalInfo}),i=Object(l.a)(c,2),r=i[0],o=i[1],j=u()(r.date).format("dddd"),b=Object(a.useRef)(null),O=Object(a.useState)({index:null}),m=Object(l.a)(O,2),g=m[0],S=m[1],k=function(e){if("tasks"===e.name){var t=r.tasks.map((function(t){return t.id===e.value.id?e.value:t}));o((function(e){return function(e){var t=e.tasks.length;if(t>=1){var n=e.tasks.reduce((function(e,t){return t.label?e+1:e}),0);if(n===t){var a=e.tasks,c=a[a.length-1].id;return a.push(Object(s.a)(Object(s.a)({},v),{},{id:c+1})),Object(s.a)(Object(s.a)({},e),{},{tasks:a})}if(n<t-1){var i=e.tasks.filter((function(e,n){return e.label||n===t-1}));return Object(s.a)(Object(s.a)({},e),{},{tasks:i})}return e}}(Object(s.a)(Object(s.a)({},e),{},{tasks:t}))}))}else o((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(d.a)({},e.name,e.value))}))},N=function(e,t){var n=b.current;if(n){var a=e.currentTarget.selectionStart,c=Array.prototype.indexOf.call(n,e.target),i=n.elements[c-2],r=n.elements[c+2],s=n.elements[c];""===t&&S({index:c});var l=function(e){e.selectionEnd=e.selectionStart=a};switch(e.keyCode){case 13:e.preventDefault(),r&&(l(r),r.focus());break;case 8:0===s.value.length&&i&&(e.preventDefault(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e,a=n.value;n.value=t;var c=new Event("input",{bubbles:!0}),i=n._valueTracker;i&&i.setValue(a),n.dispatchEvent(c)}(s),i.focus());break;case 38:i&&(e.preventDefault(),l(i),i.focus());break;case 40:r&&(e.preventDefault(),l(r),r.focus());break;case 37:0===a&&i&&(e.preventDefault(),i.selectionStart=999,i.focus())}}};return Object(a.useEffect)((function(){null!==g.index&&b.current.elements[g.index].focus()}),[g]),Object(a.useEffect)((function(){!function(){var e=b.current.elements[0];b&&"present"===r.timeStatus&&!e.value&&e.focus()}()}),[r.timeStatus]),f(r,(function(){return n(r)})),Object(h.jsxs)("div",{className:"blank ".concat(r.timeStatus),children:[Object(h.jsx)("h2",{className:"week-day",children:j}),Object(h.jsx)("p",{className:"date",children:r.date}),Object(h.jsx)(p,{data:r,onFieldChange:k}),Object(h.jsx)("form",{className:"fields-list scroll",ref:b,children:r.tasks.map((function(e,t){return Object(h.jsx)(x,{data:e,listCounter:t,blankId:r.id,onFieldChange:k,handleKeyNavigation:N},t)}))})]})}),S=n(33),k=n(32);n(26),n(27),n(28);function N(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var w=function(){var e=Object(a.useState)(N()),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){c(N())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},y=5,I="btnNextSlide",E="btnPrevSlide",C=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],i=n[1],r=w();return r.width<600?(y=1,null===c||void 0===c||c.slideTo(e.todaySlideIndex,0)):r.width<900?y=2:r.width<1100?y=3:r.width<1400&&(y=4),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:"swiper-button-prev ".concat(E)}),Object(h.jsx)(S.a,{slidesPerView:y,pagination:!0,navigation:{nextEl:".".concat(I),prevEl:".".concat(E)},onReachEnd:function(){e.onSlideEnded()},onSwiper:function(t){t.slideTo(e.todaySlideIndex-1,0),i(t)},children:e.data.map((function(t,n){return Object(h.jsx)(k.a,{virtualIndex:n,children:Object(h.jsx)(g,{data:t,onSave:e.onSave},n)},n)}))}),Object(h.jsx)("span",{className:"swiper-button-next ".concat(I)})]})},F="letoAppData",D="letoLastUpdateDate",L=function(e){localStorage.setItem(F,JSON.stringify(e))},T=u()().format("L"),A=localStorage.getItem(F),J=(n(29),function(){var e=Object(a.useState)(JSON.parse(A)||[]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=function(e,t){var n=u()(t).isBefore(T),a=u()(t).isAfter(T);return e.timeStatus=n?"past":a?"future":"present",e},r=function(e,t){for(var a=[],c=!t?-1:1;c<=e;c++){var i=u()(t).add(c,"days").format("L"),r=n.length-1+c;a.push(o(i,r))}return a},o=function(e,t){var n=Object(s.a)(Object(s.a)({},O),{},{date:e,id:t});return i(n,e)},d=function(e){var t=[];Array.isArray(e)?t=n.concat(e):t.push(e),c(t),L(t)},f=n.findIndex((function(e){return u()(e.date).isSame(T)}));Object(a.useEffect)((function(){n.length<7&&d(r(7)),function(e){var t=localStorage.getItem(D),n=JSON.parse(t);if(!u()(n).isSame(T)){var a=e.map((function(e){return i(e,e.date)}));L(a),localStorage.setItem(D,JSON.stringify(T))}}(n)}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"head-title",children:"LETO"}),Object(h.jsx)("div",{className:"board",children:Object(h.jsx)(C,{data:n,onSave:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));c(t),L(t)},onSlideEnded:function(){var e=n[n.length-1].date;d(r(7,e))},slidesCount:n.length,todaySlideIndex:f,handleKeyNavigation:function(){}})})]})});var K=function(){return Object(h.jsx)("div",{className:"LETO",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)(J,{})})})};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.11cb5ea2.chunk.js.map